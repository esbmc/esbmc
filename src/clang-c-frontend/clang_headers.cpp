#include <clang-c-frontend/clang_c_language.h>
#include <fstream>
#include <ac_config.h>

#ifdef ESBMC_CLANG_HEADER_DIR
#  include <boost/filesystem.hpp>
#else

extern "C"
{
#include <headers/cheaders.h> /* generated by cmake */
#undef ESBMC_FLAIL
}
#endif

void clang_c_languaget::dump_clang_headers(const std::string &tmp_dir)
{
  static bool dumped = false;
  if(dumped)
    return;
  dumped = true;

#define STR(x)  #x
#define ESBMC_FLAIL(body, size, ...)                                           \
  std::ofstream(tmp_dir + "/" + STR(__VA_ARGS__)).write(body, size);
#include <headers/cheaders.h>
#undef ESBMC_FLAIL
}
